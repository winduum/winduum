.ui-switch {
  display: inline-flex;
  font-weight: var(--ui-switch-font-weight, var(--font-normal));
  font-size: var(--ui-switch-font-size, var(--text-sm));
  line-height: var(--ui-switch-line-height, calc(1em + 0.25lh));
  letter-spacing: var(--ui-switch-letter-spacing, inherit);
  gap: var(--ui-switch-gap, 0.75rem);
  text-wrap: balance;

  :where(.dark) & {
    --ui-switch-bg: var(--color-body-tertiary);
  }

  & :where(a) {
    color: var(--color-accent);
    text-decoration: underline;
  }

  & :where(input) {
    --tw-outline-opacity: 0;
    --tw-outline-space: var(--space);

    display: flex;
    inline-size: var(--ui-switch-width);
    block-size: var(--ui-switch-height);
    padding: calc((var(--ui-switch-height) - var(--ui-check-icon-size)) / 2);
    border-radius: var(--ui-switch-radius, var(--rounded-full));
    background-color: var(--ui-switch-bg, var(--color-main));
    outline:
      var(--ui-switch-outline-width, 2px) solid
      color-mix(
        in var(--tw-outline-space),
        var(--ui-switch-outline-color, var(--color-main)) calc(var(--tw-outline-opacity) * 100%),
        transparent
      );
    outline-offset: var(--ui-switch-outline-offset, 0);
    transition-property: var(--transition);
    transition-timing-function: var(--ease-in-out);
    transition-duration: var(--duration);
    position: relative;
    flex-shrink: 0;

    &::before {
      width: var(--ui-check-icon-size);
      height: var(--ui-check-icon-size);
      background-color: var(--color-light);
      transition: var(--transition-all);
      border-radius: inherit;
      margin-block: auto;
      content: "";
    }

    &:where(:required) {
      & + *::after {
        color: var(--color-error);
        content: " *";
      }
    }

    &:enabled:focus {
      --ui-switch-outline-offset: var(--ui-switch-focus-outline-offset, 0);
      --tw-outline-opacity: 0.4;
    }

    &:disabled {
      opacity: var(--ui-switch-disabled-opacity, 0.5);
      cursor: not-allowed;
    }

    &:checked {
      --ui-switch-outline-color: var(--color-accent);
      --ui-switch-bg: var(--color-accent);

      &::before {
        margin-inline-start: calc(100% - var(--ui-check-icon-size));
      }
    }

    &:indeterminate {
      &::before {
        margin-inline-start: calc(50% - var(--ui-check-icon-size) / 2);
      }
    }
  }

  &.invalid, .validated & :where(input):invalid {
    --ui-switch-bg: var(--color-error);
  }
}
